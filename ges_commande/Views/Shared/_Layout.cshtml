<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>@ViewData["Title"] - ges_commande</title>
    @* <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" /> *@
        <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
        <link rel="stylesheet" href="/wwwroot/css/output.css" />
        <link rel="stylesheet" href="~/ges_commande.styles.css" asp-append-version="true" />
    </head>

    <body class="mx-auto">

    @* @inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor;
        @using Newtonsoft.Json;
    @{
        var panierJson = HttpContextAccessor.HttpContext.Session.GetString("Panier"); ;
        Panier panier = null;
        if (panierJson != null)
        {
            panier = JsonConvert.DeserializeObject<Panier>(panierJson);
        }
    } *@

    @* ------------------------- *@
        <header>
            <nav class="bg-gray-900 border-gray-200 px-4 lg:px-6 py-2.5">
                <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
                    <a asp-area="" asp-controller="Home" asp-action="Index" using System.Security.Claims; using using
                        using System.Security.Claims; using System.Security.Claims; using System.Security.Claims; using
                        System.Security.Claims; System.Security.Claims; System.Security.Claims;
                        class="flex items-center space-x-3 rtl:space-x-reverse ">
                        <img src="https://flowbite.com/docs/images/logo.svg" class="h-8" alt="Flowbite Logo" />
                        <span
                            class="self-center text-2xl font-semibold whitespace-nowrap text-white">ges_commande</span>
                    </a>
                    <div class="flex items-center md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
                        <div>
                        @if (User.IsInRole("Client"))
                        {
                                <a asp-area="" asp-controller="Produit" asp-action="PanierList"
                                    class="flex items-center pe-5 p-2 text-white rounded-lg group">

                                    <svg class="ms-3" xmlns="http://www.w3.org/2000/svg" width="32" height="32"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-cart">
                                        <circle cx="8" cy="21" r="1" />
                                        <circle cx="19" cy="21" r="1" />
                                        <path
                                            d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
                                    </svg>
                                    <!-- Badge de notification -->
                                    <div class=" text-white bg-red-600 p-0.5 text-xs font-bold rounded-xl"
                                        style="margin-top: -30%;">
                                    @* @panier.CommandeProduit.Count() *@3
                                    </div>

                                </a>
                        }
                        </div>
                        <button type="button" class="flex text-sm rounded-full md:me-0" id="user-menu-button"
                            aria-expanded="false" data-dropdown-toggle="user-dropdown" data-dropdown-placement="bottom">
                            <img src="https://i.pinimg.com/enabled_lo/564x/7c/bb/5c/7cbb5c5ac31d7b981bb303ad30bc6992.jpg"
                                alt="Photo Utilisateur"
                                class="w-16 h-16 sm:w-12 sm:h-12 rounded-full border-2 border-blue-500" />
                        </button>
                        <!-- Dropdown menu -->
                        <div class="z-50 hidden my-4 text-base list-none bg-white rounded-lg shadow" id="user-dropdown">
                            <div class="px-4 py-2 text-center">
                                <img class="w-fit h-16 rounded-full mx-auto"
                                    src="https://i.pinimg.com/enabled_lo/564x/7c/bb/5c/7cbb5c5ac31d7b981bb303ad30bc6992.jpg"
                                    alt="User avatar" />
                                <p class="mt-2 font-semibold ">@User.FindFirst("Prenom")?.Value -
                                @User.FindFirst("Nom")?.Value</p>
                                <p class="mt-2 font-semibold ">@User.Identity!.Name</p>
                            </div>
                            <a href=""
                                class="block px-4 py-2 text-sm text-center text-gray-700 hover:bg-gray-100">MODIFIER</a>
                            <a asp-controller="Securite" asp-action="LogOut"
                                class="block px-4 py-2 text-sm text-center text-gray-700 hover:bg-gray-100">DECONNEXION</a>
                        </div>
                    </div>
                    <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1"
                        id="navbar-user">
                        <ul
                            class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0">
                            <li>
                                <a asp-area="" asp-controller="Produit" asp-action="Index"
                                    class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100 group">
                                    <span class="flex-1 ms-3 text-xl whitespace-nowrap">Produits</span>
                                    <svg class="flex-shrink-0 w-5 h-5 ms-3 text-gray-500 transition duration-75  group-hover:text-gray-900 dark:group-hover:text-white"
                                        aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                                        viewBox="0 0 18 20">
                                        <path
                                            d="M17 5.923A1 1 0 0 0 16 5h-3V4a4 4 0 1 0-8 0v1H2a1 1 0 0 0-1 .923L.086 17.846A2 2 0 0 0 2.08 20h13.84a2 2 0 0 0 1.994-2.153L17 5.923ZM7 9a1 1 0 0 1-2 0V7h2v2Zm0-5a2 2 0 1 1 4 0v1H7V4Zm6 5a1 1 0 1 1-2 0V7h2v2Z" />
                                    </svg>
                                </a>
                            </li>
                            <li>
                                <a asp-area="" asp-controller="Commande" asp-action="Index"
                                    class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100 group">
                                    <span class="flex-1 text-xl whitespace-nowrap">Commandes</span>
                                    <svg class="ms-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-package">
                                        <path
                                            d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z" />
                                        <path d="M12 22V12" />
                                        <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7" />
                                        <path d="m7.5 4.27 9 5.15" />
                                    </svg>
                                </a>
                            </li>
                        @* @if (User.IsInRole("Client"))
                        {
                                <li>
                                    <a asp-area="" asp-controller="Produit" asp-action="Delete"
                                    class="flex items-center pe-5 p-2 text-gray-900 rounded-lg hover:bg-gray-100 group">

                                        <svg class="ms-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" class="lucide lucide-shopping-cart">
                                            <circle cx="8" cy="21" r="1" />
                                            <circle cx="19" cy="21" r="1" />
                                            <path
                                                d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
                                        </svg>
                                        <!-- Badge de notification -->
                                        <div class=" text-white bg-red-600 p-0.5 text-xs font-bold rounded-xl" style="margin-top: -15%;">
                                            12
                                        </div>

                                    </a>
                                </li>
                        } *@
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
    @* ------------------------ *@
        <div class="mx-auto">
            <main role="main" class="pb-3">
            @RenderBody()
            </main>
        </div>

    @* <footer class=" footer text-muted bg-blue-400">
            <div class="container">
                &copy; 2024 - ges_commande - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
            </div>
        </footer> *@
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
    @* <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script> *@
        <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
        <script src="/node_modules/flowbite/dist/flowbite.min.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>
        <script src="~/js/site.js"></script>
        <script src="/_framework/aspnetcore-browser-refresh.js"></script>

    @await RenderSectionAsync("Scripts", required: false)
    </body>

</html>
